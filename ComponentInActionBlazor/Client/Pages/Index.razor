@page "/"

@inject IRepository repo

<PageTitle>Index</PageTitle>


<button type="button" class="btn btn-sm btn-primary" @onclick="AddMovie">Add Movie</button>

<div>
    <h1>Movie</h1>
    <MoviesList Movies="_movies"/>
</div>


@code {
    private List<Movie> _movies = new List<Movie>();

    protected override async Task OnInitializedAsync() 
    {
        await Task.Delay(1000);
        _movies = repo.GetMovies();
    }
    private void AddMovie()
    {
        var index = _movies.Count + 1;
        _movies.Add(new Movie() { Id = index, Title = $"Spider-Man: {index}", ReleaseDate = new DateTime(2023, 11, 2) });
    }
}